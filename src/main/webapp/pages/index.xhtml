<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
	<h:outputStylesheet name="grid.css" library="css" />
	<h:outputStylesheet name="ext_960gs.css" library="css" />
	<h:outputStylesheet name="styleForPage.css" library="css" />
	<h:outputScript name="utilsCommon.js" library="javascript" />

	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<link rel="shortcut icon" href="favicon.gif" type="image/x-icon" />
	<title>Meu - CRUD</title>

	<script type="text/javascript">
		function logoutFunction() {
			logoutUser();
		}

		function carregarPagina() {
			window.location.reload();
		}
		function limparComponente() {
			limparComponente();
		}
	</script>
</h:head>

<h:body style="font-size: 12px; background-color:#2E6E9E"
	onload="limparComponente()">
	<pe:layout fullPage="true" id="layout">

		<!-- 		<p:layoutUnit id="layoutUnitNorth" position="north" header="Meu - CRUD" size="75"/> -->
		<pe:layoutPane position="north" size="75">
			<ui:include src="/sections/header.xhtml" />
		</pe:layoutPane>

		<!-- 		<pe:layoutPane id="layoutUnitWest" position="west" size="200" -->
		<!-- 			header="Menu Principal"> -->
		<pe:layoutPane id="layoutUnitCenter" position="center">
			<h:form id="form" prependId="false">

				<!-- 				<p:panelMenu id="panelMenu" style="width: 100%; "> -->
				<p:menubar id="panelMenu" style="width: 100%;">
					<p:submenu id="arquivos" label="Arquivos"
						rendered="true" expanded="false">
						<!-- 							oncomplete="carregarPagina();" -->
						<p:menuitem id="arquivo"
							value="Arquivo"
							styleClass="#{mainMenu.numIndex == 2 ? 'selectedMenu' : null}"
							update=":centerContentPanel :form:panelMenu"
							actionListener="#{arquivoController.init}"
							action="#{mainMenu.arquivo}" icon="ui-icon-bookmark"
							onclick="PF('reportBlockUI').show()"
							oncomplete="PF('reportBlockUI').hide()" />

					</p:submenu>
				</p:menubar>
				<!-- 				</p:panelMenu> -->

				<p:remoteCommand name="logoutUser"
					actionListener="#{loginBean.logout(false)}" process="@this" />
				<p:remoteCommand name="limparComponente"
					actionListener="#{mainMenu.init}" process="@this" update="@form" />

				<p:blockUI block=":#{p:component('layoutUnitCenter')}" trigger=""
					widgetVar="reportBlockUI">
					<h:outputLabel value="#{wd['blockui.loading.text']}" />
					<br />
					<h:graphicImage library="images"
						name="#{wd['blockui.loading.img']}" />
				</p:blockUI>
			</h:form>
			<!-- 		</pe:layoutPane> -->

			<h:panelGroup id="centerContentPanel">
				<ui:include src="#{mainMenu.index}" />
			</h:panelGroup>
		</pe:layoutPane>

	</pe:layout>
	<!-- 900000 - equivale a 10 minutos-->
	<p:idleMonitor timeout="900000">
		<p:ajax event="idle" listener="#{idleViewExpired.idleExpired}" />
	</p:idleMonitor>

	<p:dialog header="Expirou! " resizable="false" closable="false"
		widgetVar="idleDialog" modal="true" width="300" height="110"
		onShow="logoutFunction()" style="text-align: center;">
		<div style="text-align: center;">
			<h:outputText value="Sua Sessão Expirou!" />
		</div>
		<br />
		<br />
		<br />
		<div style="text-align: center;">
			<a href="#{request.contextPath}/login.xhtml">Clique Aqui para
				Logar Novamente</a>
		</div>
	</p:dialog>
</h:body>
</html>
